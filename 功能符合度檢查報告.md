# 會計系統功能符合度檢查報告

## 📋 檢查日期
2026年1月

## 📊 總體評估

本系統目前是一個**基礎的外匯會計系統**，具備基本的總帳管理功能，但**尚未完全符合**您提出的完整需求，特別是針對**移工匯款業務**的特殊需求。

---

## ✅ 已實現功能

### 1. 總帳管理 (General Ledger) - 部分符合

#### ✅ 傳票輸入 (Journal Entries)
- **狀態**: 已實現
- **功能**: 
  - 手動建立會計分錄
  - 借貸平衡驗證
  - 分錄狀態管理（草稿、已過帳、已作廢）
  - 分錄明細管理
- **位置**: `app/dashboard/journal/page.tsx`

#### ✅ 會計科目設定 (Chart of Accounts)
- **狀態**: 已實現
- **功能**:
  - 會計科目表管理
  - 支援階層式科目結構（parent_id, level）
  - 科目類型：資產、負債、權益、收入、費用
  - 可新增、編輯、刪除科目
- **位置**: `app/dashboard/settings/page.tsx`

#### ✅ 多幣別支援
- **狀態**: 已實現
- **功能**:
  - 支援多種幣別（USD、EUR、JPY、CNY、TWD）
  - 匯率表管理（exchange_rates 表）
  - 分錄明細可指定幣別
- **位置**: `database-setup.sql`, `app/dashboard/transactions/page.tsx`

#### ❌ 常用分錄樣板
- **狀態**: **未實現**
- **需求**: 支援常用分錄樣板（如每月付房租、水電費），只需修改金額與日期
- **建議**: 需要新增「分錄樣板」功能模組

### 2. 總分類帳與試算表

#### ✅ 總分類帳 (General Ledger)
- **狀態**: 已實現
- **功能**: 可查看各會計科目的詳細交易記錄與餘額
- **位置**: `app/dashboard/ledger/page.tsx`

#### ✅ 試算表 (Trial Balance)
- **狀態**: 已實現
- **功能**: 查看所有會計科目的借貸餘額
- **位置**: `app/dashboard/trial-balance/page.tsx`

#### ✅ 流水帳 (Cash Book)
- **狀態**: 已實現
- **功能**: 查看所有會計交易的流水記錄
- **位置**: `app/dashboard/cashbook/page.tsx`

### 3. 財務報表

#### ✅ 資產負債表
- **狀態**: 已實現（基礎版）
- **位置**: `app/dashboard/reports/page.tsx`

#### ✅ 損益表
- **狀態**: 已實現（基礎版）
- **位置**: `app/dashboard/reports/page.tsx`

#### ⚠️ 現金流量表
- **狀態**: 開發中（UI 已準備，但功能未完成）

---

## ❌ 未實現功能

### 1. 應收帳款管理 (Accounts Receivable, AR)

#### ❌ 報價單轉訂單/發票
- **狀態**: **未實現**
- **需求**: 將報價單一鍵轉為銷貨單或應收帳款
- **影響**: 高 - 對於有銷售業務的公司很重要

#### ❌ 帳齡分析 (Aging Report)
- **狀態**: **未實現**
- **需求**: 列出哪些客戶已欠款超過 30 天、60 天
- **影響**: 高 - 老闆最需要看的功能之一

#### ❌ 沖帳功能
- **狀態**: **未實現**
- **需求**: 收到銀行匯款時，能快速勾選對應的發票進行核銷
- **影響**: 高

### 2. 應付帳款與費用管理 (Accounts Payable, AP)

#### ❌ 費用報銷
- **狀態**: **未實現**
- **需求**: 員工差旅費、交際費的登錄，支援 App 拍照上傳收據（OCR 功能）
- **影響**: 中

#### ❌ 廠商付款排程
- **狀態**: **未實現**
- **需求**: 記錄什麼時候該付廠商貨款，避免逾期
- **影響**: 中

### 3. 銀行與現金調節 (Cash Management)

#### ❌ 銀行串接 (Bank Feeds)
- **狀態**: **未實現**
- **需求**: 系統直接串接網銀，自動下載每日收支明細
- **影響**: 高 - 現代「方便記帳」的神器，可省去 80% 手動輸入時間

#### ❌ 銀行調節表
- **狀態**: **未實現**
- **需求**: 自動比對系統帳面餘額與銀行實際餘額是否相符
- **影響**: 高 - 「記帳是否正確」的關鍵檢核點

### 4. 稅務申報 (Taxation - 台灣適用)

#### ❌ 媒體申報檔 (營業稅)
- **狀態**: **未實現**
- **需求**: 自動產生 401/403 申報書所需的媒體檔案（文字檔）
- **影響**: 高 - 在台灣，會計系統必須與稅務緊密結合

#### ❌ 電子發票串接
- **狀態**: **未實現**
- **需求**: 內建或能串接電子發票開立功能
- **影響**: 高 - 對於 B2C 企業很重要

---

## 🚨 移工匯款業務特殊需求 - 全部未實現

### 1. 履約保證/信託專戶管理 (Trust Account Management)

#### ❌ 資金分流記帳
- **狀態**: **未實現**
- **需求**: 
  - 公司自有資金帳本：記錄手續費收入、薪資、房租等
  - 客戶信託帳本：嚴格記錄客戶存入的代匯款項
- **影響**: **極高** - 這是此行業最重要的一點
- **法規要求**: 移工匯入的錢（本金）在匯出前屬於負債（代收款），必須存放在「專用存款帳戶」

#### ❌ 信託水位報表
- **狀態**: **未實現**
- **需求**: 自動產出「信託水位報表」，每天知道專戶裡的錢是否足夠
- **影響**: **極高** - 營運關鍵

### 2. API 串接與批量沖帳 (Automated Reconciliation)

#### ❌ API 接口
- **狀態**: **未實現**
- **需求**: 
  - 與「匯款 App/前台系統」對接
  - 當前台 App 收到款項通知，會計系統自動產生分錄
- **影響**: **極高** - 每天可能有成千上萬筆小額款項，不能依賴人工輸入

#### ❌ Excel/CSV 匯入功能
- **狀態**: **未實現**（README 中列為待辦）
- **需求**: 強大的 Excel/CSV 匯入功能，能與便利商店回傳的金流檔對接
- **影響**: **極高**

#### ❌ 自動比對與差額計算
- **狀態**: **未實現**
- **需求**: 自動比對「便利商店回傳的金流檔」與「銀行實際入帳金額」，自動抓出差額（手續費）
- **影響**: **極高**

### 3. 多幣別與匯兌損益自動重評價

#### ⚠️ 每日匯率表輸入
- **狀態**: 部分實現（有匯率表，但沒有每日自動更新機制）

#### ❌ 已實現損益計算
- **狀態**: **未實現**
- **需求**: 當實際跟銀行買美金結匯時，系統要能自動計算當下的匯兌損益
- **影響**: 高

#### ❌ 未實現損益（月底評價）
- **狀態**: **未實現**
- **需求**: 月底結帳時，系統要能自動按月底匯率，重新評價帳上持有的外幣價值
- **影響**: 高

### 4. 每日營運報表與日結功能 (Daily Balancing)

#### ❌ 日結功能
- **狀態**: **未實現**
- **需求**: 金融服務業不同於一般企業月結，通常需要「日結」
- **影響**: **極高**

#### ❌ 日計表
- **狀態**: **未實現**
- **需求**: 一鍵生成當日的資金總表：
  - 今日總收款（TWD）
  - 今日總匯出（Foreign Currency）
  - 今日手續費收入
  - 專戶餘額核對
- **影響**: **極高** - 對應付金管會的稽核或申報非常重要

### 5. 手續費收入認列與發票開立 (Revenue Recognition)

#### ❌ 交易金額精準切割
- **狀態**: **未實現**
- **需求**: 
  - 移工匯款金額（例如 10,000 元）是代收代付
  - 只有匯款手續費（例如 150 元）才是公司的營收
  - 系統必須能精準切割每一筆交易
- **影響**: **極高**

#### ❌ 電子發票系統串接
- **狀態**: **未實現**
- **需求**: 
  - 當移工繳費完成，系統自動針對「手續費」金額開立電子發票（B2C）
  - 將發票資訊傳送給使用者（透過 App 推播或 Email）
- **影響**: **極高**

#### ❌ 自動拋轉傳票
- **狀態**: **未實現**
- **需求**: 貸：手續費收入，貸：銷項稅額
- **影響**: 高

---

## 📈 系統架構評估

### ✅ 已具備的技術基礎
- Next.js 14 + TypeScript
- Supabase (PostgreSQL) 資料庫
- Row Level Security (RLS) 權限控制
- 現代化 UI（Tailwind CSS）

### ❌ 缺少的關鍵架構

#### 1. API 開放性
- **現狀**: 系統目前是純前端應用，沒有提供 API 接口
- **需求**: 需要建立 RESTful API 或 GraphQL API，讓前台業務系統可以串接
- **建議**: 
  - 建立 Next.js API Routes 或
  - 使用 Supabase Edge Functions 提供 API 端點

#### 2. 批量處理能力
- **現狀**: 系統只能手動一筆一筆輸入交易
- **需求**: 需要支援批量匯入、批量沖帳、批量傳票生成
- **建議**: 建立批量處理模組，支援 CSV/Excel 匯入

#### 3. 自動化流程
- **現狀**: 所有操作都需要人工介入
- **需求**: 需要自動化流程（如日結傳票自動生成、匯兌損益自動計算）
- **建議**: 建立定時任務（Cron Jobs）或事件驅動機制

---

## 🎯 符合度總結

### 一般會計系統需求
| 功能類別 | 符合度 | 說明 |
|---------|--------|------|
| 總帳管理 | 60% | 基本功能已實現，但缺少常用分錄樣板 |
| 應收帳款 | 0% | 完全未實現 |
| 應付帳款 | 0% | 完全未實現 |
| 銀行調節 | 0% | 完全未實現 |
| 稅務申報 | 0% | 完全未實現 |

### 移工匯款業務特殊需求
| 功能類別 | 符合度 | 說明 |
|---------|--------|------|
| 信託專戶管理 | 0% | 完全未實現，但這是行業最重要的功能 |
| API 串接 | 0% | 完全未實現，但這是批量處理的關鍵 |
| 匯兌損益重評價 | 20% | 有匯率表，但沒有自動計算機制 |
| 日結功能 | 0% | 完全未實現 |
| 手續費認列 | 0% | 完全未實現 |

### 總體符合度
- **一般會計功能**: 約 **15%**
- **移工匯款業務功能**: 約 **5%**
- **整體符合度**: 約 **10%**

---

## 💡 建議與優先順序

### 🔴 高優先級（必須實現）
1. **信託專戶管理** - 法規要求，行業核心功能
2. **API 串接與批量處理** - 每天成千上萬筆交易，無法人工處理
3. **日結功能與日計表** - 金融服務業基本要求
4. **手續費收入認列** - 營收認列的核心邏輯
5. **銀行串接 (Bank Feeds)** - 大幅提升效率

### 🟡 中優先級（重要功能）
1. **應收帳款管理**（帳齡分析、沖帳）
2. **匯兌損益自動重評價**
3. **稅務申報功能**（媒體申報檔）
4. **電子發票串接**

### 🟢 低優先級（便利功能）
1. **常用分錄樣板**
2. **費用報銷與 OCR**
3. **廠商付款排程**

---

## 📝 結論

目前系統是一個**良好的基礎架構**，具備：
- ✅ 現代化的技術棧
- ✅ 基本的總帳管理功能
- ✅ 良好的資料庫設計

但**距離完整的移工匯款會計系統還有很大差距**，特別是：
- ❌ 缺少行業核心功能（信託專戶、日結、批量處理）
- ❌ 缺少 API 開放性
- ❌ 缺少自動化流程

**建議**: 需要進行大規模的功能開發，特別是針對移工匯款業務的特殊需求。預計需要 **3-6 個月**的開發時間才能達到基本可用狀態。

---

**報告生成時間**: 2026年1月
**檢查範圍**: 完整代碼庫與資料庫結構

